/*!
 * quickhybrid v0.0.1
 * (c) 2017-2017 dailc
 * Released under the BSD-3-Clause License.
 * https://github.com/quickhybrid/quickhybrid
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function e(e,t){var a=this;this.loadingDiv=function(){var e=document.getElementById(f);e||((e=document.createElement("div")).id=f,e.className="mui-backdrop mui-loading",e.innerHTML=' \n        <span class=" mui-spinner mui-spinner-white"\n            style="width: 20%;height: 20%;\n        max-width: 46px;max-height: 46px;\n        position:absolute;top:46%;left:46%;">\n        </span>\n        <span class="tipsContent" style="position:absolute;\n        font-size: 14px;\n        top:54%;left: 46%;\n        text-align: center;">\n                        加载中...\n        </span>');return e}(),document.body.appendChild(this.loadingDiv),this.setTitle(e),t&&!0===t.padlock&&this.loadingDiv.addEventListener("click",function(){a.close()})}function t(e,t){var a=e;a.id=a.id||g;var n=function(e){var t=e||{},a="";if(a+="<div "+(t.id?'id="'+t.id+'"':"")+' class="mui-popover mui-popover-action mui-popover-bottom">',t.title&&(a+='<ul class="mui-table-view">',a+='<li class="mui-table-view-cell">',a+='<a class="titleActionSheet"><b>'+t.title+"</b></a>",a+="</li>",a+="</ul>"),a+='<ul class="mui-table-view">',t.items&&Array.isArray(t.items))for(var n=0;n<t.items.length;n+=1)a+='<li class="mui-table-view-cell">',a+="<a >"+(t.items[n]||"")+"</a>",a+="</li>";return a+="</ul>",a+='<ul class="mui-table-view">',a+='<li class="mui-table-view-cell">',a+='<a class="cancelActionSheet"><b>取消</b></a>',a+="</li>",a+="</ul>",a+="</div>"}(a);if(document.getElementById(b))document.getElementById(y).innerHTML=n;else{var i=document.createElement("div");i.id=y,i.innerHTML=n,document.body.appendChild(i),mui("body").on("shown",".mui-popover",function(){}),mui("body").on("hidden",".mui-popover",function(){})}var o=document.getElementById(y);mui(o).off(),mui(o).on("tap","li > a",function(){var e=this.innerText;-1===this.className.indexOf("titleActionSheet")&&(mui("#"+a.id).popover("toggle"),-1===this.className.indexOf("cancelActionSheet")&&t&&t(e))}),mui("#"+a.id).popover("toggle")}function a(e){var t=e;return"number"==typeof t||"string"==typeof t?((t=parseInt(t,10))<10&&(t="0"+t),t):""}function n(e){var t=e[0],a=e[1];!function(e,t){var a=e||{};window.mui&&window.mui.DtPicker?(k!==a.type&&(w&&(w.dispose(),w=void 0),k=a.type),(w=w||new mui.DtPicker(a)).show(function(e){var n={};"date"===a.type?n.date=e.y.value+"-"+e.m.value+"-"+e.d.value:"time"===a.type?n.time=e.h.value+":"+e.i.value:"month"===a.type?n.month=e.y.value+"-"+e.m.value:n.datetime=e.y.value+"-"+e.m.value+"-"+e.d.value+" "+e.h.value+":"+e.i.value,t&&t(n)})):console.error("错误,缺少引用的css或js,无法使用mui的dtpicker")}(t,function(e){t.success&&t.success(e),a&&a(e)})}var i="mui-popup-in",o="mui-popup-out",s="mui-popup-input",r="mui-popup-button",l="mui-active",c=[],u=function(){var e=document.createElement("div");return e.classList.add("mui-popup-backdrop"),e.addEventListener("webkitTransitionEnd",function(){e.classList.contains(l)||e.parentNode&&e.parentNode.removeChild(e)}),e}(),d=function(e){return'<div class="'+s+'">'+('<input type="text" autofocus placeholder="'+(e||"")+'"/>')+"</div>"},m=function(e,t,a){return'<div class="mui-popup-inner">'+('<div class="mui-popup-title">'+t+"</div>")+('<div class="mui-popup-text">'+e+"</div>")+(a||"")+"</div>"},p=function(e){for(var t=e.length,a=[],n=0;n<t;n+=1){var i=n===t-1?"mui-popup-button-bold":"";a.push('<span class="'+r+" "+i+'">'+e[n]+"</span>")}return'<div class="mui-popup-buttons">'+a.join("")+"</div>"},v=function(e,t){var a=e.replace(/[\n]/g,"<BR />"),n=document.createElement("div");n.className="mui-popup",n.innerHTML=a;var d=function(){n.parentNode&&n.parentNode.removeChild(n),n=null};n.addEventListener("webkitTransitionEnd",function(e){n&&e.target===n&&n.classList.contains(o)&&d()}),n.style.display="block",document.body.appendChild(n),n.classList.add(i),u.classList.contains(l)||(u.style.display="block",document.body.appendChild(u),u.classList.add(l));var m=n.querySelectorAll("."+r),p=n.querySelector("."+s+" input"),v={element:n,close:function(e,a){if(n){var s=p?p.value:e||0;t&&t(s,{index:e||0,value:s}),!1!==a?(n.classList.remove(i),n.classList.add(o)):d(),c.pop(),c.length?c[c.length-1].show(a):u.classList.remove(l)}}},f=function(e){v.close([].slice.call(m).indexOf(e.target))},h=document.querySelectorAll("."+r);if(h&&h.length>0)for(var g=0;g<h.length;g+=1)h[g].addEventListener("click",f);return c.length&&c[c.length-1].hide(),c.push({close:v.close,show:function(){n.style.display="block",n.classList.add(i)},hide:function(){n.style.display="none",n.classList.remove(i)}}),v},f="MFRAME_LOADING",h=void 0;e.prototype.setTitle=function(e){this.loadingDiv&&(this.loadingDiv.style.display="block",this.loadingDiv.querySelector(".tipsContent").innerText=e||"")},e.prototype.onclose=function(){},e.prototype.close=function(){this.loadingDiv&&(this.loadingDiv.style.display="none",this.onclose())},e.prototype.dispose=function(){this.loadingDiv&&this.loadingDiv.parentNode&&this.loadingDiv.parentNode.removeChild(this.loadingDiv)};var g="defaultActionSheetId",y="defaultActionSheetWrapContent",b="actionSheetContent",w=void 0,k=void 0,C=void 0,L=void 0,P=window.quick;!function(i){var o=i,s=o.innerUtil;o.extendModule("ui",[{namespace:"toast",os:["h5"],defaultParams:{message:""},runCode:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=s.compatibleStringParamsToObject.call(this,t,"message"),i=n[0],o=n[1];!function(e){var t=e,a=t.message,n=t.duration||2e3,i=document.createElement("div");i.classList.add("mui-toast-container"),i.innerHTML='<div class="mui-toast-message">'+a+"</div>",i.addEventListener("webkitTransitionEnd",function(){i.classList.contains(l)||(i.parentNode.removeChild(i),i=null)}),i.addEventListener("click",function(){i.parentNode.removeChild(i),i=null}),document.body.appendChild(i),i.classList.add(l),setTimeout(function(){i&&i.classList.remove(l)},n)}(i),i.success&&i.success(),o&&o()}},{namespace:"showDebugDialog",os:["h5"],defaultParams:{debugInfo:""},runCode:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=s.compatibleStringParamsToObject.call(this,t,"debugInfo");n[0]={title:"",message:n[0].debugInfo,buttonName:"确定",success:n[0].success},o.ui.alert.apply(this,n)}},{namespace:"alert",os:["h5"],defaultParams:{title:"",message:"",buttonName:"确定"},runCode:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=s.compatibleStringParamsToObject.call(this,t,"message","title","buttonName"),i=n[0],o=n[1];!function(e,t){var a=e;a.title=a.title||"提示",a.buttonName=a.buttonName||"确定",a.message=a.message||"";var n=m(a.message,a.title),i=p([a.buttonName]);v(n+i,t)}(i,function(){i.success&&i.success({}),o&&o({})})}},{namespace:"confirm",os:["h5"],defaultParams:{title:"",message:"",buttonLabels:["取消","确定"]},runCode:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=t,i=n[0],o=n[1];!function(e,t){var a=e;a.title=a.title||"提示",a.buttonLabels=a.buttonLabels||["确认","取消"],a.message=a.message||"";var n=m(a.message,a.title),i=p(a.buttonLabels);v(n+i,t)}(i,function(e){var t={which:e};i.success&&i.success(t),o&&o(t)})}},{namespace:"prompt",os:["h5"],defaultParams:{title:"",hint:"",text:"",buttonLabels:["取消","确定"]},runCode:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=t,i=n[0],o=n[1];!function(e,t){var a=e;a.title=a.title||"您好",a.buttonLabels=a.buttonLabels||["确认","取消"],a.text=a.text||"",a.hint=a.hint||"请输入内容";var n=m(a.text,a.title,d(a.hint)),i=p(a.buttonLabels);v(n+i,t)}(i,function(e){var t={which:e?1:0,content:e};i.success&&i.success(t),o&&o(t)})}},{namespace:"actionSheet",os:["h5"],defaultParams:{items:[]},runCode:function(){for(var e=arguments.length,a=Array(e),n=0;n<e;n++)a[n]=arguments[n];var i=a,o=i[0],s=i[1];t(o,function(e){var t={which:o.items.indexOf(e),content:e};o.success&&o.success(t),s&&s(t)})}},{namespace:"pickDate",os:["h5"],defaultParams:{beginYear:1900,endYear:2100,datetime:""},runCode:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=t,s=o[0],r=s.datetime;if(!r){var l=new Date;r=l.getFullYear()+"\n                -"+a(l.getMonth()+1)+"\n                -"+a(l.getDate())}s.value=r,s.type="date",n(o)}},{namespace:"pickTime",os:["h5"],defaultParams:{datetime:""},runCode:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=t,s=o[0],r=new Date,l=r.getFullYear()+"\n                -"+a(r.getMonth()+1)+"\n                -"+a(r.getDate())+" ",c=s.datetime;c=c?l+c:l+(a(r.getHours())+"\n                :")+a(r.getMinutes()),s.value=c,s.type="time",n(o)}},{namespace:"pickDateTime",os:["h5"],defaultParams:{datetime:"",beginYear:1900,endYear:2100},runCode:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=t,s=o[0],r=s.datetime;if(!r){var l=new Date;r=l.getFullYear()+"\n                -"+a(l.getMonth()+1)+"\n                -"+a(l.getDate())+" "+a(l.getHours())+"\n                :"+a(l.getMinutes())}s.value=r,s.type=null,n(o)}},{namespace:"pickMonth",os:["h5"],defaultParams:{datetime:"",beginYear:1900,endYear:2100},runCode:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=t,s=o[0],r=new Date,l=s.datetime;l?l+="-"+a(r.getDate()):l=r.getFullYear()+"\n                -"+a(r.getMonth()+1)+"\n                -"+a(r.getDate())+" ",s.value=l,s.type="month",n(o)}},{namespace:"popPicker",os:["h5"],defaultParams:{layer:1,data:[]},runCode:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=t,i=n[0],o=n[1];!function(e,t){var a=e||{};if(window.mui&&window.mui.PopPicker){var n=a.layer||1;L!==n&&(C&&(C.dispose(),C=void 0),L=n),(C=C||new mui.PopPicker({layer:n})).setData(a.data||[]),C.show(function(e){var a={};a.items=[];for(var i=0;i<n;i+=1)a.items.push({text:e[i].text,value:e[i].value});t&&t(a)})}else console.error("未引入mui pop相关js(css)")}(i,function(e){i.success&&i.success(e),o&&o(e)})}},{namespace:"showWaiting",os:["h5"],defaultParams:{message:"",padlock:!0},runCode:function(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];var i=a,o=i[0],s=i[1];!function(t,a){void 0===h?h=new e(t,a):h.setTitle(t)}(o.message,{padlock:o.padlock}),o.success&&o.success({}),s&&s({})}},{namespace:"closeWaiting",os:["h5"],runCode:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=t,i=n[0],o=n[1];h&&(h.dispose(),h=void 0),i.success&&i.success(),o&&o()}}])}(P),function(e){var t=e,a=t.innerUtil;t.extendModule("page",[{namespace:"open",os:["h5"],defaultParams:{pageUrl:"",data:{}},runCode:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=a.compatibleStringParamsToObject.call(this,t,"pageUrl","data")[0];i.pageUrl=a.getFullUrlByParams(i.pageUrl,i.data),document.location.href=i.pageUrl}},{namespace:"close",os:["h5"],runCode:function(){window.history.length>1&&window.history.back()}},{namespace:"reload",os:["h5"],runCode:function(){window.location.reload()}}])}(P),function(e){var t=e,a=t.innerUtil;t.extendModule("storage",[{namespace:"getItem",os:["h5"],defaultParams:{key:""},runCode:function(e,t,n){var i=e,o=i.success,s=i.error;a.isObject(i.key)||(i.key=[i.key]);var r=i.key,l={};try{for(var c=0,u=r.length;c<u;c+=1){var d=localStorage.getItem(r[c]);l[r[c]]=d}}catch(e){var m={code:0,msg:"localStorage获取值出错:"+JSON.stringify(r),result:e};return s&&s(m),void(n&&n(m))}o&&o(l),t&&t(l)}},{namespace:"setItem",os:["h5"],runCode:function(e,t,a){var n=e,i=n.success,o=n.error;try{Object.keys(n).forEach(function(e){if("success"!==e&&"error"!==e){var t=n[e];localStorage.setItem(e,t)}})}catch(e){var s={code:0,msg:"QuotaExceededError"===e.name?"超出本地存储限额，建议先清除一些无用空间!":"localStorage存储值出错",result:e};return o&&o(s),void(a&&a(s))}i&&i({}),t&&t({})}},{namespace:"removeItem",os:["h5"],defaultParams:{key:""},runCode:function(e,t,n){var i=e,o=i.success,s=i.error;a.isObject(i.key)||(i.key=[i.key]);var r=i.key;try{for(var l=0,c=r.length;l<c;l+=1)localStorage.removeItem(r[l])}catch(e){var u={code:0,msg:"localStorage移除值出错:"+JSON.stringify(r),result:e};return s&&s(u),void(n&&n(u))}o&&o({}),t&&t({})}}])}(P),function(e){var t=e,a=t.innerUtil;t.extendModule("device",[{namespace:"callPhone",os:["h5"],defaultParams:{phoneNum:""},runCode:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=a.compatibleStringParamsToObject.call(this,t,"phoneNum")[0].phoneNum;window.location.href="tel:"+i}},{namespace:"sendMsg",os:["h5"],defaultParams:{phoneNum:"",message:""},runCode:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=a.compatibleStringParamsToObject.call(this,t,"phoneNum","message"),o=i[0].phoneNum,s=i[0].message;window.location.href="sms:"+o+"?body="+s}},{namespace:"sendMail",os:["h5"],defaultParams:{mail:"",subject:"",cc:""},runCode:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=a.compatibleStringParamsToObject.call(this,t,"mail","subject","cc"),o=i[0].mail,s=i[0].subject,r=i[0].cc;window.location.href="mailto:"+o+"?subject="+s+"&cc="+r}}])}(P)});